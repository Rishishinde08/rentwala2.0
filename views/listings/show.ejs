<%- layout("layouts/boilerplate.ejs") %>

<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-6">
                <img src="<%= listing.image.url %>" alt="<%= listing.title %>" class="img-fluid rounded" style="width: 100%; height: 400px; object-fit: cover;">
            </div>
            <div class="col-md-6">
                <h1 class="mb-4"><%= listing.title %></h1>
                <div class="mb-4">
                    <h5 class="text-muted mb-2">Description</h5>
                    <p class="lead"><%= listing.description %></p>
                </div>
                <div class="mb-4">
                    <h5 class="text-muted mb-2">Price</h5>
                    <p class="h3 text-primary">â‚¹<%= listing.price.toLocaleString("en-IN") %></p>
                </div>
                <div class="mb-4">
                    <h5 class="text-muted mb-2">Location</h5>
                    <p class="lead"><%= listing.location %>, <%= listing.country %></p>
                </div>
                <div class="d-flex gap-2">
                    <a href="/listings/<%= listing._id %>/edit" class="btn btn-warning offset-4">Edit</a>
                    <form action="/listings/<%= listing._id %>?_method=DELETE" method="POST" class="d-inline">
                        <button class="btn btn-danger offset-4">Delete</button>
                    </form>
                    <a href="/listings" class="btn btn-secondary offset-1">Back to Listings</a>
                </div>
            </div>
        </div>
    </div>

    <h4>Reviews</h4>
    <form action="/listings/<%= listing._id %>/reviews" method="POST">
        <div class="form-group">
            <label for="comment" class="form-label">Comment</label>
            <textarea class="form-control" id="comment" name="review[comment]" required cols="30" rows="10" placeholder="Enter your review here"></textarea>
        </div>
        <div class="form-group">
            <label for="rating" class="form-label">Rating</label>
            <input type="range" min="1" max="5" class="form-range" id="rating" name="review[rating]" required style="width: 50%;">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</body>
